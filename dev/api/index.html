<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Comrade API · Comrade.jl</title><meta name="title" content="Comrade API · Comrade.jl"/><meta property="og:title" content="Comrade API · Comrade.jl"/><meta property="twitter:title" content="Comrade API · Comrade.jl"/><meta name="description" content="Documentation for Comrade.jl."/><meta property="og:description" content="Documentation for Comrade.jl."/><meta property="twitter:description" content="Documentation for Comrade.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Comrade.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../vlbi_imaging_problem/">Introduction to the VLBI Imaging Problem</a></li><li><a class="tocitem" href="../conventions/">Conventions</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/ClosureImaging/">Imaging a Black Hole using only Closure Quantities</a></li><li><a class="tocitem" href="../tutorials/GeometricModeling/">Geometric Modeling of EHT Data</a></li><li><a class="tocitem" href="../tutorials/HybridImaging/">Hybrid Imaging of a Black Hole</a></li><li><a class="tocitem" href="../tutorials/LoadingData/">Loading Data into Comrade</a></li><li><a class="tocitem" href="../tutorials/PolarizedImaging/">Polarized Image and Instrumental Modeling</a></li><li><a class="tocitem" href="../tutorials/StokesIImaging/">Stokes I Simultaneous Image and Instrument Modeling</a></li></ul></li><li><span class="tocitem">Extensions</span><ul><li><a class="tocitem" href="../ext/optimization/">Optimization Extension</a></li><li><a class="tocitem" href="../ext/ahmc/">AdvancedHMC Extension</a></li><li><a class="tocitem" href="../ext/nested/">NestedSamples Extension</a></li><li><a class="tocitem" href="../ext/dynesty/">Dynesty Extension</a></li></ul></li><li><a class="tocitem" href="../base_api/">Base API</a></li><li class="is-active"><a class="tocitem" href>Comrade API</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Model-Definitions"><span>Model Definitions</span></a></li><li><a class="tocitem" href="#Data-Interface"><span>Data Interface</span></a></li><li><a class="tocitem" href="#VLBI-Modeling"><span>VLBI Modeling</span></a></li><li><a class="tocitem" href="#Misc"><span>Misc</span></a></li><li><a class="tocitem" href="#Internal-(Not-Public-API)"><span>Internal (Not Public API)</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Comrade API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Comrade API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ptiede/Comrade.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ptiede/Comrade.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Comrade-API"><a class="docs-heading-anchor" href="#Comrade-API">Comrade API</a><a id="Comrade-API-1"></a><a class="docs-heading-anchor-permalink" href="#Comrade-API" title="Permalink"></a></h1><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="#Comrade-API">Comrade API</a></li><li class="no-marker"><ul><li><a href="#Contents">Contents</a></li><li><a href="#Index">Index</a></li><li><a href="#Model-Definitions">Model Definitions</a></li><li><a href="#Data-Interface">Data Interface</a></li><li><a href="#VLBI-Modeling">VLBI Modeling</a></li><li><a href="#Misc">Misc</a></li><li><a href="#Internal-(Not-Public-API)">Internal (Not Public API)</a></li></ul></li></ul><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Comrade.Comrade"><code>Comrade.Comrade</code></a></li><li><a href="#Comrade.AbstractArrayConfiguration"><code>Comrade.AbstractArrayConfiguration</code></a></li><li><a href="#Comrade.AbstractInstrumentModel"><code>Comrade.AbstractInstrumentModel</code></a></li><li><a href="#Comrade.AbstractObservationTable"><code>Comrade.AbstractObservationTable</code></a></li><li><a href="#Comrade.AbstractSkyModel"><code>Comrade.AbstractSkyModel</code></a></li><li><a href="#Comrade.AbstractVLBIPosterior"><code>Comrade.AbstractVLBIPosterior</code></a></li><li><a href="#Comrade.AbstractVLBITable"><code>Comrade.AbstractVLBITable</code></a></li><li><a href="#Comrade.AbstractVisibilityDatum"><code>Comrade.AbstractVisibilityDatum</code></a></li><li><a href="#Comrade.ArrayPrior"><code>Comrade.ArrayPrior</code></a></li><li><a href="#Comrade.CalTable"><code>Comrade.CalTable</code></a></li><li><a href="#Comrade.ClosureConfig"><code>Comrade.ClosureConfig</code></a></li><li><a href="#Comrade.ClosurePhases"><code>Comrade.ClosurePhases</code></a></li><li><a href="#Comrade.Coherencies"><code>Comrade.Coherencies</code></a></li><li><a href="#Comrade.DiskStore"><code>Comrade.DiskStore</code></a></li><li><a href="#Comrade.EHTArrayBaselineDatum"><code>Comrade.EHTArrayBaselineDatum</code></a></li><li><a href="#Comrade.EHTArrayConfiguration"><code>Comrade.EHTArrayConfiguration</code></a></li><li><a href="#Comrade.EHTClosurePhaseDatum"><code>Comrade.EHTClosurePhaseDatum</code></a></li><li><a href="#Comrade.EHTCoherencyDatum"><code>Comrade.EHTCoherencyDatum</code></a></li><li><a href="#Comrade.EHTLogClosureAmplitudeDatum"><code>Comrade.EHTLogClosureAmplitudeDatum</code></a></li><li><a href="#Comrade.EHTObservationTable"><code>Comrade.EHTObservationTable</code></a></li><li><a href="#Comrade.EHTVisibilityAmplitudeDatum"><code>Comrade.EHTVisibilityAmplitudeDatum</code></a></li><li><a href="#Comrade.EHTVisibilityDatum"><code>Comrade.EHTVisibilityDatum</code></a></li><li><a href="#Comrade.FixedSkyModel"><code>Comrade.FixedSkyModel</code></a></li><li><a href="#Comrade.GenericJones"><code>Comrade.GenericJones</code></a></li><li><a href="#Comrade.IIDSitePrior"><code>Comrade.IIDSitePrior</code></a></li><li><a href="#Comrade.IdealInstrumentModel"><code>Comrade.IdealInstrumentModel</code></a></li><li><a href="#Comrade.InstrumentModel"><code>Comrade.InstrumentModel</code></a></li><li><a href="#Comrade.IntegSeg"><code>Comrade.IntegSeg</code></a></li><li><a href="#Comrade.JonesD"><code>Comrade.JonesD</code></a></li><li><a href="#Comrade.JonesF"><code>Comrade.JonesF</code></a></li><li><a href="#Comrade.JonesG"><code>Comrade.JonesG</code></a></li><li><a href="#Comrade.JonesR"><code>Comrade.JonesR</code></a></li><li><a href="#Comrade.JonesSandwich"><code>Comrade.JonesSandwich</code></a></li><li><a href="#Comrade.LogClosureAmplitudes"><code>Comrade.LogClosureAmplitudes</code></a></li><li><a href="#Comrade.MemoryStore"><code>Comrade.MemoryStore</code></a></li><li><a href="#Comrade.ObservedSkyModel"><code>Comrade.ObservedSkyModel</code></a></li><li><a href="#Comrade.PosteriorSamples"><code>Comrade.PosteriorSamples</code></a></li><li><a href="#Comrade.SEFDReference"><code>Comrade.SEFDReference</code></a></li><li><a href="#Comrade.Scan"><code>Comrade.Scan</code></a></li><li><a href="#Comrade.ScanSeg"><code>Comrade.ScanSeg</code></a></li><li><a href="#Comrade.Segmentation"><code>Comrade.Segmentation</code></a></li><li><a href="#Comrade.SingleReference"><code>Comrade.SingleReference</code></a></li><li><a href="#Comrade.SingleStokesGain"><code>Comrade.SingleStokesGain</code></a></li><li><a href="#Comrade.SiteArray"><code>Comrade.SiteArray</code></a></li><li><a href="#Comrade.SiteLookup"><code>Comrade.SiteLookup</code></a></li><li><a href="#Comrade.SkyModel"><code>Comrade.SkyModel</code></a></li><li><a href="#Comrade.TimeTable"><code>Comrade.TimeTable</code></a></li><li><a href="#Comrade.TrackSeg"><code>Comrade.TrackSeg</code></a></li><li><a href="#Comrade.TransformedVLBIPosterior"><code>Comrade.TransformedVLBIPosterior</code></a></li><li><a href="#Comrade.VLBIPosterior"><code>Comrade.VLBIPosterior</code></a></li><li><a href="#Comrade.Visibilities"><code>Comrade.Visibilities</code></a></li><li><a href="#Comrade.VisibilityAmplitudes"><code>Comrade.VisibilityAmplitudes</code></a></li><li><a href="#Comrade.apply_fluctuations"><code>Comrade.apply_fluctuations</code></a></li><li><a href="#Comrade.arrayconfig-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.arrayconfig</code></a></li><li><a href="#Comrade.baseline"><code>Comrade.baseline</code></a></li><li><a href="#Comrade.beamsize-Tuple{Comrade.AbstractArrayConfiguration}"><code>Comrade.beamsize</code></a></li><li><a href="#Comrade.beamsize"><code>Comrade.beamsize</code></a></li><li><a href="#Comrade.beamsize-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.beamsize</code></a></li><li><a href="#Comrade.build_datum"><code>Comrade.build_datum</code></a></li><li><a href="#Comrade.caltable-Tuple{SiteArray}"><code>Comrade.caltable</code></a></li><li><a href="#Comrade.chi2"><code>Comrade.chi2</code></a></li><li><a href="#Comrade.closure_phases"><code>Comrade.closure_phases</code></a></li><li><a href="#Comrade.comrade_opt"><code>Comrade.comrade_opt</code></a></li><li><a href="#Comrade.dataproducts"><code>Comrade.dataproducts</code></a></li><li><a href="#Comrade.datatable"><code>Comrade.datatable</code></a></li><li><a href="#Comrade.dirty_beam"><code>Comrade.dirty_beam</code></a></li><li><a href="#Comrade.dirty_image"><code>Comrade.dirty_image</code></a></li><li><a href="#Comrade.domain-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.domain</code></a></li><li><a href="#Comrade.domain-Tuple{Comrade.AbstractArrayConfiguration}"><code>Comrade.domain</code></a></li><li><a href="#Comrade.extract_amp"><code>Comrade.extract_amp</code></a></li><li><a href="#Comrade.extract_coherency"><code>Comrade.extract_coherency</code></a></li><li><a href="#Comrade.extract_cphase"><code>Comrade.extract_cphase</code></a></li><li><a href="#Comrade.extract_lcamp"><code>Comrade.extract_lcamp</code></a></li><li><a href="#Comrade.extract_table"><code>Comrade.extract_table</code></a></li><li><a href="#Comrade.extract_vis"><code>Comrade.extract_vis</code></a></li><li><a href="#Comrade.forward_model"><code>Comrade.forward_model</code></a></li><li><a href="#Comrade.idealvisibilities"><code>Comrade.idealvisibilities</code></a></li><li><a href="#Comrade.instrumentmodel-Tuple{Comrade.AbstractVLBIPosterior}"><code>Comrade.instrumentmodel</code></a></li><li><a href="#Comrade.likelihood"><code>Comrade.likelihood</code></a></li><li><a href="#Comrade.load_samples"><code>Comrade.load_samples</code></a></li><li><a href="#Comrade.logclosure_amplitudes"><code>Comrade.logclosure_amplitudes</code></a></li><li><a href="#Comrade.loglikelihood"><code>Comrade.loglikelihood</code></a></li><li><a href="#Comrade.logprior"><code>Comrade.logprior</code></a></li><li><a href="#Comrade.postsamples"><code>Comrade.postsamples</code></a></li><li><a href="#Comrade.prior_sample"><code>Comrade.prior_sample</code></a></li><li><a href="#Comrade.quadrangle"><code>Comrade.quadrangle</code></a></li><li><a href="#Comrade.resample_equal"><code>Comrade.resample_equal</code></a></li><li><a href="#Comrade.residual"><code>Comrade.residual</code></a></li><li><a href="#Comrade.residual_data"><code>Comrade.residual_data</code></a></li><li><a href="#Comrade.residuals"><code>Comrade.residuals</code></a></li><li><a href="#Comrade.rmap"><code>Comrade.rmap</code></a></li><li><a href="#Comrade.samplerinfo"><code>Comrade.samplerinfo</code></a></li><li><a href="#Comrade.samplerstats"><code>Comrade.samplerstats</code></a></li><li><a href="#Comrade.simulate_observation"><code>Comrade.simulate_observation</code></a></li><li><a href="#Comrade.site_tuple"><code>Comrade.site_tuple</code></a></li><li><a href="#Comrade.sites-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.sites</code></a></li><li><a href="#Comrade.sites-Tuple{Comrade.CalTable}"><code>Comrade.sites</code></a></li><li><a href="#Comrade.sites-Tuple{Comrade.AbstractArrayConfiguration}"><code>Comrade.sites</code></a></li><li><a href="#Comrade.skymodel-Tuple{Comrade.AbstractVLBIPosterior, Any}"><code>Comrade.skymodel</code></a></li><li><a href="#Comrade.skymodel"><code>Comrade.skymodel</code></a></li><li><a href="#Comrade.timestamps"><code>Comrade.timestamps</code></a></li><li><a href="#Comrade.timetable"><code>Comrade.timetable</code></a></li><li><a href="#Comrade.triangle"><code>Comrade.triangle</code></a></li><li><a href="#HypercubeTransform.ascube-Tuple{VLBIPosterior}"><code>HypercubeTransform.ascube</code></a></li><li><a href="#HypercubeTransform.asflat-Tuple{VLBIPosterior}"><code>HypercubeTransform.asflat</code></a></li><li><a href="#TransformVariables.inverse-Tuple{Comrade.TransformedVLBIPosterior, Any}"><code>TransformVariables.inverse</code></a></li><li><a href="#TransformVariables.transform-Tuple{Comrade.TransformedVLBIPosterior, Any}"><code>TransformVariables.transform</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.Comrade" href="#Comrade.Comrade"><code>Comrade.Comrade</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">Comrade</code></pre><p>Composable Modeling of Radio Emission</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/Comrade.jl#L1-L4">source</a></section></article><h2 id="Model-Definitions"><a class="docs-heading-anchor" href="#Model-Definitions">Model Definitions</a><a id="Model-Definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Definitions" title="Permalink"></a></h2><h3 id="Models"><a class="docs-heading-anchor" href="#Models">Models</a><a id="Models-1"></a><a class="docs-heading-anchor-permalink" href="#Models" title="Permalink"></a></h3><p>For the description of the model API see <a href="https://ehtjulia.github.io/VLBISkyModels.jl/stable/">VLBISkyModels</a>.</p><h2 id="Data-Interface"><a class="docs-heading-anchor" href="#Data-Interface">Data Interface</a><a id="Data-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Interface" title="Permalink"></a></h2><h3 id="Data-Tables"><a class="docs-heading-anchor" href="#Data-Tables">Data Tables</a><a id="Data-Tables-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Tables" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.AbstractVLBITable" href="#Comrade.AbstractVLBITable"><code>Comrade.AbstractVLBITable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractVLBITable{F}</code></pre><p>An abstract VLBI table that is used to store data for a VLBI observation. To implement your own table you just need to specify the  <code>VLBISkyModels.rebuild</code> function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/abstract.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.datatable" href="#Comrade.datatable"><code>Comrade.datatable</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">datatable(obs::AbstractVLBITable)</code></pre><p>Construct a table from the observation <code>obs</code>. The table is usually a StructArray of fields</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/abstract.jl#L11-L15">source</a></section><section><div><pre><code class="language-julia hljs">datatable(obs::AbstractObservationTable)</code></pre><p>Returns a tabular representation of the data. Note that for closures this ignores the covariance between quantities, which is otherwise included in the full <code>EHTObservationTable</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L32-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.AbstractArrayConfiguration" href="#Comrade.AbstractArrayConfiguration"><code>Comrade.AbstractArrayConfiguration</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractArrayConfiguration{F&lt;:Comrade.AbstractBaselineDatum} &lt;: Comrade.AbstractVLBITable{F&lt;:Comrade.AbstractBaselineDatum}</code></pre><p>This defined the abstract type for an array configuration. Namely, baseline times, SEFD&#39;s, bandwidth, observation frequencies, etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTArrayBaselineDatum" href="#Comrade.EHTArrayBaselineDatum"><code>Comrade.EHTArrayBaselineDatum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTArrayBaselineDatum{T, P, V} &lt;: Comrade.AbstractBaselineDatum</code></pre><p>A single datum of an <code>ArrayConfiguration</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L54-L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTArrayConfiguration" href="#Comrade.EHTArrayConfiguration"><code>Comrade.EHTArrayConfiguration</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTArrayConfiguration{A&lt;:Comrade.EHTArrayBaselineDatum, F, T, S, D&lt;:(AbstractArray{A&lt;:Comrade.EHTArrayBaselineDatum})} &lt;: Comrade.AbstractArrayConfiguration{A&lt;:Comrade.EHTArrayBaselineDatum}</code></pre><p>Table that specified pertinent details about the EHT array during an observation. These are typically items that are known before the observation is made.</p><p><strong>Fields</strong></p><ul><li><code>bandwidth</code>: Observing bandwith (Hz)</li></ul><ul><li><code>tarr</code>: Telescope array file</li></ul><ul><li><code>scans</code>: Scan times</li></ul><ul><li><code>mjd</code>: modified julia date of the observation</li></ul><ul><li><code>ra</code>: RA of the observation in J2000 (deg)</li></ul><ul><li><code>dec</code>: DEC of the observation in J2000 (deg)</li></ul><ul><li><code>source</code>: Common source name</li></ul><ul><li><code>timetype</code>: Time zone used.</li></ul><ul><li><code>datatable</code>: A struct array of <code>EHTArrayBaselineDatum</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L110-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.ClosureConfig" href="#Comrade.ClosureConfig"><code>Comrade.ClosureConfig</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ClosureConfig{F, A&lt;:Comrade.AbstractArrayConfiguration{F}, D, V, E} &lt;: Comrade.AbstractArrayConfiguration{F}</code></pre><p>Array config file for closure quantities. This stores the design matrix <code>designmat</code> that transforms from visibilties to closure products.</p><p><strong>Fields</strong></p><ul><li><p><code>ac</code>: Array configuration for visibilities</p></li><li><p><code>designmat</code>: Closure design matrix</p></li><li><p><code>vis</code>: visibilities to closure design matrix</p></li><li><p><code>noise</code>: visibility noises to closure design matrix</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L199-L206">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.sites-Tuple{Comrade.AbstractArrayConfiguration}" href="#Comrade.sites-Tuple{Comrade.AbstractArrayConfiguration}"><code>Comrade.sites</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sites(d::AbstractArrayConfiguration)</code></pre><p>Get all the sites in a observation. The result is a vector of symbols.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L16-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.domain-Tuple{Comrade.AbstractArrayConfiguration}" href="#Comrade.domain-Tuple{Comrade.AbstractArrayConfiguration}"><code>Comrade.domain</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">domain(ac; executor, header)
</code></pre><p>Get the u, v, time, freq domain of the array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L29-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.beamsize-Tuple{Comrade.AbstractArrayConfiguration}" href="#Comrade.beamsize-Tuple{Comrade.AbstractArrayConfiguration}"><code>Comrade.beamsize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">beamsize(ac::AbstractArrayConfiguration)</code></pre><p>Calculate the approximate beam size of the array <code>ac</code> as the inverse of the longest baseline distance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L44-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.logclosure_amplitudes" href="#Comrade.logclosure_amplitudes"><code>Comrade.logclosure_amplitudes</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">logclosure_amplitudes(vis::AbstractArray, d::DesignMatrix)</code></pre><p>Compute the log-closure amplitudes for a set of visibilities with a design matrix <code>d</code>.</p><p><strong>Notes</strong></p><p>This uses a closure design matrix for the computation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L298-L305">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.closure_phases" href="#Comrade.closure_phases"><code>Comrade.closure_phases</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">closure_phases(vis::AbstractArray, d::DesignMatrix)</code></pre><p>Compute the closure phases for a set of visibilities and design matrix <code>d</code></p><p><strong>Notes</strong></p><p>This uses a closure design matrix for the computation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L313-L320">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.AbstractObservationTable" href="#Comrade.AbstractObservationTable"><code>Comrade.AbstractObservationTable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractObservationTable{F&lt;:Comrade.AbstractVisibilityDatum} &lt;: Comrade.AbstractVLBITable{F&lt;:Comrade.AbstractVisibilityDatum}</code></pre><p>The abstract obervation table. This contains actual data plus the array configuration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTObservationTable" href="#Comrade.EHTObservationTable"><code>Comrade.EHTObservationTable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTObservationTable{T&lt;:Comrade.AbstractVisibilityDatum, S&lt;:AbstractArray, E&lt;:AbstractArray, A&lt;:Comrade.AbstractArrayConfiguration} &lt;: Comrade.AbstractObservationTable{T&lt;:Comrade.AbstractVisibilityDatum}</code></pre><p>The main data product type in <code>Comrade</code> this stores the <code>data</code> which can be a StructArray of any <code>AbstractInterferometryDatum</code> type. Note that the underlying structure is not part of the public API. Users should typically construct tables from the <a href="#Comrade.extract_table"><code>extract_table</code></a> function.</p><p><strong>Fields</strong></p><ul><li><code>measurement</code>: Obervation measurement</li></ul><ul><li><code>noise</code>: Observation thermal noise</li></ul><ul><li><code>config</code>: Array config holds ancillary information about array</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L92-L102">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.domain-Tuple{Comrade.AbstractObservationTable}" href="#Comrade.domain-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.domain</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">domain(obs::AbstractObservationTable; executor=Serial(), header=ComradeBase.NoHeader()</code></pre><p>Returns the u, v, time, frequency domain of the observation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.arrayconfig-Tuple{Comrade.AbstractObservationTable}" href="#Comrade.arrayconfig-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.arrayconfig</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">arrayconfig(obs::AbstractObservationTable)
arrayconfig(obs::AbstractObservationTable, p::Symbol)</code></pre><p>Returns the array configuration for a given observation. If <code>p</code> is provided then only the property <code>p</code> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L42-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.beamsize-Tuple{Comrade.AbstractObservationTable}" href="#Comrade.beamsize-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.beamsize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">beamsize(obs::AbstractObservationTable)</code></pre><p>Calculate the approximate beam size of the observation <code>obs</code> as the inverse of the longest baseline distance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L73-L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.sites-Tuple{Comrade.AbstractObservationTable}" href="#Comrade.sites-Tuple{Comrade.AbstractObservationTable}"><code>Comrade.sites</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sites(d::AbstractObservationTable)</code></pre><p>Get all the sites in a observation. The result is a vector of symbols.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L81-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.TimeTable" href="#Comrade.TimeTable"><code>Comrade.TimeTable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct TimeTable{O&lt;:Comrade.AbstractVLBITable, T, S}</code></pre><p>Wraps EHTObservationTable in a table that separates the observation into scans. This implements the table interface. You can access scans by directly indexing into the table. This will create a view into the table not copying the data.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; st = timetable(obs)
julia&gt; st[begin] # grab first scan
julia&gt; st[end]   # grab last scan</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/timetable.jl#L3-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.Scan" href="#Comrade.Scan"><code>Comrade.Scan</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct Scan{T, I, S}</code></pre><p>Composite type that holds information for a single scan of the telescope.</p><p><strong>Fields</strong></p><ul><li><code>time</code>: Scan time</li></ul><ul><li><code>index</code>: Scan indices which are (scan index, data start index, data end index)</li></ul><ul><li><code>scan</code>: Scan data usually a StructArray of a &lt;:AbstractVisibilityDatum</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/timetable.jl#L48-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.timetable" href="#Comrade.timetable"><code>Comrade.timetable</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">timetable(obs::AbstractArrayConfiguration)</code></pre><p>Reorganizes the observation into a table of scans, where scan are defined by unique timestamps. To access the data you can use scalar indexing</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">st = timetable(obs)
# Grab the first scan
scan1 = st[1]

# Acess the detections in the scan
scan1[1]

# grab e.g. the baselines
scan1[:baseline]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/timetable.jl#L120-L139">source</a></section></article><h3 id="Datums"><a class="docs-heading-anchor" href="#Datums">Datums</a><a id="Datums-1"></a><a class="docs-heading-anchor-permalink" href="#Datums" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.AbstractVisibilityDatum" href="#Comrade.AbstractVisibilityDatum"><code>Comrade.AbstractVisibilityDatum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractVisibilityDatum</code></pre><p>An abstract type for all VLBI data types. See <a href="#Comrade.EHTVisibilityDatum"><code>Comrade.EHTVisibilityDatum</code></a> for an example.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L3-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTCoherencyDatum" href="#Comrade.EHTCoherencyDatum"><code>Comrade.EHTCoherencyDatum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTCoherencyDatum{S, B&lt;:Comrade.AbstractBaselineDatum, M&lt;:(StaticArraysCore.SArray{Tuple{2, 2}, Complex{S}, 2}), E&lt;:(StaticArraysCore.SArray{Tuple{2, 2}, S, 2})} &lt;: Comrade.AbstractVisibilityDatum{S}</code></pre><p>A Datum for a single coherency matrix</p><p><strong>Fields</strong></p><ul><li><code>measurement</code>: coherency matrix, with entries in Jy</li></ul><ul><li><code>noise</code>: visibility uncertainty matrix, with entries in Jy</li></ul><ul><li><code>baseline</code>: baseline information</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L31-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTVisibilityDatum" href="#Comrade.EHTVisibilityDatum"><code>Comrade.EHTVisibilityDatum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTVisibilityDatum{Pol, S&lt;:Number, B&lt;:Comrade.AbstractBaselineDatum} &lt;: Comrade.AbstractSinglePolDatum{Pol, S&lt;:Number}</code></pre><p>A struct holding the information for a single measured complex visibility.</p><p><strong>FIELDS</strong></p><ul><li><code>measurement</code>: Complex Vis. measurement (Jy)</li></ul><ul><li><code>noise</code>: noise of the complex vis (Jy)</li></ul><ul><li><code>baseline</code>: baseline information</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L57-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTVisibilityAmplitudeDatum" href="#Comrade.EHTVisibilityAmplitudeDatum"><code>Comrade.EHTVisibilityAmplitudeDatum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTVisibilityAmplitudeDatum{P, S&lt;:Number, B&lt;:Comrade.AbstractBaselineDatum} &lt;: Comrade.AbstractSinglePolDatum{P, S&lt;:Number}</code></pre><p>A struct holding the information for a single measured visibility amplitude.</p><p><strong>FIELDS</strong></p><ul><li><code>measurement</code>: amplitude (Jy)</li></ul><ul><li><code>noise</code>: noise of the visibility amplitude (Jy)</li></ul><ul><li><code>baseline</code>: baseline information</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L85-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTLogClosureAmplitudeDatum" href="#Comrade.EHTLogClosureAmplitudeDatum"><code>Comrade.EHTLogClosureAmplitudeDatum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTLogClosureAmplitudeDatum{P, S&lt;:Number, B&lt;:Comrade.AbstractBaselineDatum} &lt;: Comrade.ClosureProducts{P, S&lt;:Number}</code></pre><p>A Datum for a single log closure amplitude.</p><p><strong></strong></p><ul><li><code>measurement</code>: log-closure amplitude</li></ul><ul><li><code>noise</code>: log-closure amplitude noise in the high-snr limit</li></ul><ul><li><code>baseline</code>: baselines for the closure phase</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L146-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.EHTClosurePhaseDatum" href="#Comrade.EHTClosurePhaseDatum"><code>Comrade.EHTClosurePhaseDatum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EHTClosurePhaseDatum{P, S&lt;:Number, B&lt;:Comrade.AbstractBaselineDatum} &lt;: Comrade.ClosureProducts{P, S&lt;:Number}</code></pre><p>A Datum for a single closure phase.</p><p><strong>Fields</strong></p><ul><li><code>measurement</code>: closure phase (rad)</li></ul><ul><li><code>noise</code>: noise of the closure phase assuming the high-snr limit</li></ul><ul><li><code>baseline</code>: baselines for the closure phase</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L111-L119">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.triangle" href="#Comrade.triangle"><code>Comrade.triangle</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">triangle(b::EHTClosurePhaseDatum)</code></pre><p>Returns the sites used in the closure phase triangle.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L137-L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.baseline" href="#Comrade.baseline"><code>Comrade.baseline</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">baseline(scan::Scan)</code></pre><p>Return the baselines for each datum in a scan</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/timetable.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.quadrangle" href="#Comrade.quadrangle"><code>Comrade.quadrangle</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">quadrangle(b::EHTClosurePhaseDatum)</code></pre><p>Returns the sites used in the closure amplitude quadrangle.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/datums.jl#L170-L174">source</a></section></article><h3 id="Data-Products"><a class="docs-heading-anchor" href="#Data-Products">Data Products</a><a id="Data-Products-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Products" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.extract_table" href="#Comrade.extract_table"><code>Comrade.extract_table</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">extract_table(obs, dataproducts::VLBIDataProducts)</code></pre><p>Extract an <a href="#Comrade.EHTObservationTable"><code>Comrade.EHTObservationTable</code></a> table of data products <code>dataproducts</code>. To pass additional keyword for the data products you can pass them as keyword arguments to the data product type. For a list of potential data products see <code>subtypes(Comrade.VLBIDataProducts)</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; dlcamp, dcphase = extract_table(obs, LogClosureAmplitudes(;snrcut=3.0), ClosurePhases(;snrcut=3.0, cut_trivial=true))
julia&gt; dcoh = extract_table(obs, Coherencies())
julia&gt; dvis = extract_table(obs, VisibilityAmplitudes())</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L105-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.Visibilities" href="#Comrade.Visibilities"><code>Comrade.Visibilities</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Visibilities(;kwargs...)</code></pre><p>Type to specify to extract the complex visibilities table in the <a href="#Comrade.extract_table"><code>extract_table</code></a> function. Optional keywords are passed through <code>extract_table</code> to specify additional option.</p><p><strong>Special keywords for eht-imaging with Pyehtim.jl</strong></p><p>Any keyword arguments are ignored for now. Use eht-imaging directly to modify the data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L73-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.VisibilityAmplitudes" href="#Comrade.VisibilityAmplitudes"><code>Comrade.VisibilityAmplitudes</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Visibilities(;kwargs...)</code></pre><p>Type to specify to extract the log closure amplitudes table in the <a href="#Comrade.extract_table"><code>extract_table</code></a> function. Optional keywords are passed through <code>extract_table</code> to specify additional option.</p><p><strong>Special keywords for eht-imaging with Pyehtim.jl</strong></p><p>For a list of potential keyword arguments see <code>eht-imaging</code> and <code>add_amp</code> command for obsdata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L60-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.ClosurePhases" href="#Comrade.ClosurePhases"><code>Comrade.ClosurePhases</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ClosuresPhases(;kwargs...)</code></pre><p>Type to specify to extract the closure phase table in the <a href="#Comrade.extract_table"><code>extract_table</code></a> function. Optional keywords are passed through <code>extract_table</code> to specify additional option.</p><p><strong>Special keywords for eht-imaging with Pyehtim.jl</strong></p><p>For a list of potential keyword arguments see <code>eht-imaging</code> and <code>add_cphase</code> command for obsdata. In addition note we have changed the following:</p><ul><li>count: How the closures are formed, the available options are &quot;min-correct&quot;, &quot;min&quot;, &quot;max&quot;</li></ul><p><strong>Warning</strong></p><p>The <code>count</code> keyword argument is treated specially in <code>Comrade</code>. The default option is &quot;min-correct&quot; and should almost always be used. This option construct a minimal set of closure phases that is valid even when the array isn&#39;t fully connected. For testing and legacy reasons we <code>ehtim</code> other count options are also included. However, the current <code>ehtim</code> count=&quot;min&quot; option is broken and does construct proper minimal sets of closure quantities if the array isn&#39;t fully connected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L9-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.LogClosureAmplitudes" href="#Comrade.LogClosureAmplitudes"><code>Comrade.LogClosureAmplitudes</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LogClosureAmplitudes(;kwargs...)</code></pre><p>Type to specify to extract the log closure amplitudes table in the <a href="#Comrade.extract_table"><code>extract_table</code></a> function. Optional keywords are passed through <code>extract_table</code> to specify additional option.</p><p><strong>Special keywords for eht-imaging with Pyehtim.jl</strong></p><p>For a list of potential keyword arguments see <code>eht-imaging</code> and <code>add_cphase</code> command for obsdata. In addition note we have changed the following:</p><ul><li>count: How the closures are formed, the available options are &quot;min-correct&quot;, &quot;min&quot;, &quot;max&quot;</li></ul><p>Returns an EHTObservation with log-closure amp. datums</p><p><strong>Warning</strong></p><p>The <code>count</code> keyword argument is treated specially in <code>Comrade</code>. The default option is &quot;min-correct&quot; and should almost always be used. This option construct a minimal set of closure phases that is valid even when the array isn&#39;t fully connected. For testing and legacy reasons we <code>ehtim</code> other count options are also included. However, the current <code>ehtim</code> count=&quot;min&quot; option is broken and does construct proper minimal sets of closure quantities if the array isn&#39;t fully connected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L34-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.Coherencies" href="#Comrade.Coherencies"><code>Comrade.Coherencies</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Coherencies(;kwargs...)</code></pre><p>Type to specify to extract the coherency matrices table in the <a href="#Comrade.extract_table"><code>extract_table</code></a> function. Optional keywords are passed through <code>extract_table</code> to specify additional option.</p><p><strong>Special keywords for eht-imaging with Pyehtim.jl</strong></p><p>Any keyword arguments are ignored for now. Use eht-imaging directly to modify the data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L86-L94">source</a></section></article><h2 id="VLBI-Modeling"><a class="docs-heading-anchor" href="#VLBI-Modeling">VLBI Modeling</a><a id="VLBI-Modeling-1"></a><a class="docs-heading-anchor-permalink" href="#VLBI-Modeling" title="Permalink"></a></h2><h3 id="Sky-Models"><a class="docs-heading-anchor" href="#Sky-Models">Sky Models</a><a id="Sky-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Sky-Models" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.AbstractSkyModel" href="#Comrade.AbstractSkyModel"><code>Comrade.AbstractSkyModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSkyModel</code></pre><p>The abstract type for Comrade Sky Models. For a concrete implementation see <a href="#Comrade.SkyModel"><code>SkyModel</code></a>.</p><p>Any subtype must implement the following methods</p><ul><li><code>set_array(m::AbstractSkyModel, array::AbstractArrayConfiguration)</code>: Sets the array configuration  for the sky model <code>m</code> and returns the observed sky model and prior.</li></ul><p>The following methods have default implementations:</p><ul><li><code>idealvisibilities(m::AbstractSkyModel, x)</code>: Computes the ideal visibilities of the sky model <code>m</code>  given the model parameters <code>x</code>.</li><li><code>skymodel(m::AbstractSkyModel, x)</code>: Returns the sky model image given the model parameters <code>x</code>.</li><li><code>domain(m::AbstractSkyModel)</code>: Returns the domain of the sky model <code>m</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/skymodels/models.jl#L4-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.SkyModel" href="#Comrade.SkyModel"><code>Comrade.SkyModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SkyModel(f, prior, grid::AbstractRectiGrid; algorithm = NFFTAlg(), metadata=nothing)</code></pre><p>Construct a sky model using the function map <code>f</code> with parameter priors <code>prior</code>, where the image model is defined on the domain <code>grid</code>. If the underlying model produced by <code>f</code> is non-analytic, then <code>algorithm</code> is used to numerically Fourier transform the model image. The <code>metadata</code> option contains additional information needed by the model <code>f</code>.</p><p><strong>Arguments</strong></p><ul><li><code>f(x, p)</code> : A function must be two arguments, where <code>x</code> are the model parameters and <code>p</code> is the metadata.  typically <code>x</code> and <code>p</code> are named tuples.</li><li><code>prior</code> : A named tuple of priors for the model parameters defined in <code>x</code>. Each model parameter used in <code>x</code> must have a defined element in the prior.</li><li><code>grid</code> : The domain on which the model is defined. This defines the field of view and resolution of the model. Note that if <code>f</code> produces a analytic model then this field of view isn&#39;t used directly in the computation of the visibilities.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>algorithm</code> : The Fourier transform algorithm used to compute the visibilities. The default is  <code>NFFTAlg()</code> which uses a non-uniform fast Fourier transform. Other options can be found by using  <code>subtypes(VLBISkyModels.FourierTransform)</code></li><li><code>metadata</code> : Additional information needed by the model <code>f</code>. These are the addtional arguments  passed to the model function <code>f</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/skymodels/models.jl#L42-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.FixedSkyModel" href="#Comrade.FixedSkyModel"><code>Comrade.FixedSkyModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FixedSkyModel(m::AbstractModel, grid::AbstractRectiGrid; algorithm = NFFTAlg())</code></pre><p>Construct a sky model that has no free parameters. This is useful for models where the image structure is known apriori but the instrument model is unknown.</p><p><strong>Arguments</strong></p><ul><li><code>m</code> : The fixed sky model.</li><li><code>grid</code> : The domain on which the model is defined. This defines the field of view and resolution of the model. Note that if <code>f</code> produces a analytic model then this field of view isn&#39;t used directly in the computation of the visibilities.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>algorithm</code> : The Fourier transform algorithm used to compute the visibilities. The default is  <code>NFFTAlg()</code> which uses a non-uniform fast Fourier transform. Other options can be found by using  <code>subtypes(VLBISkyModels.FourierTransform)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/skymodels/models.jl#L116-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.idealvisibilities" href="#Comrade.idealvisibilities"><code>Comrade.idealvisibilities</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">idealvisibilities(m::AbstractSkyModel, x)</code></pre><p>Computes the ideal non-corrupted visibilities of the sky model <code>m</code> given the model parameters <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/skymodels/models.jl#L102-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.skymodel-Tuple{Comrade.AbstractVLBIPosterior, Any}" href="#Comrade.skymodel-Tuple{Comrade.AbstractVLBIPosterior, Any}"><code>Comrade.skymodel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">skymodel(post::AbstractVLBIPosterior, θ)</code></pre><p>Returns the sky model or image of a posterior using the parameter values<code>θ</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L133-L137">source</a></section></article><h3 id="Instrument-Models"><a class="docs-heading-anchor" href="#Instrument-Models">Instrument Models</a><a id="Instrument-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Instrument-Models" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.CalTable" href="#Comrade.CalTable"><code>Comrade.CalTable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct CalTable{T, G&lt;:(AbstractVecOrMat)}</code></pre><p>A Tabes of calibration quantities. The columns of the table are the telescope sites codes. The rows are the calibration quantities at a specific time stamp. This user should not use this struct directly. Instead that should call <a href="#Comrade.caltable-Tuple{SiteArray}"><code>caltable</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/caltable.jl#L3-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.caltable-Tuple{SiteArray}" href="#Comrade.caltable-Tuple{SiteArray}"><code>Comrade.caltable</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">caltable(s::SiteArray)</code></pre><p>Creates a calibration table from a site array</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/caltable.jl#L195-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.sites-Tuple{Comrade.CalTable}" href="#Comrade.sites-Tuple{Comrade.CalTable}"><code>Comrade.sites</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sites(g::CalTable)</code></pre><p>Return the sites in the calibration table</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/caltable.jl#L22-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.IIDSitePrior" href="#Comrade.IIDSitePrior"><code>Comrade.IIDSitePrior</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IIDSitePrior(seg::Segmentation, dist)</code></pre><p>Create a site prior that is independent and identically distributed (IID) across all times and frequencies. The <code>seg</code> argument is a segmentation object that defines how fine the time segmentation is. The <code>dist</code> argument is the distribution of the site prior.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">A = IIDSitePrior(ScanSeg(), Normal(0, 1))</code></pre><p>creates a site prior that is constant across scans and each scan has a unit Normal prior.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/independent.jl#L7-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.ArrayPrior" href="#Comrade.ArrayPrior"><code>Comrade.ArrayPrior</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ArrayPrior(default_dist; refant=NoReference(), phase=false, kwargs...)</code></pre><p>Construct a prior for an entire array of sites.</p><ul><li>The <code>default_dist</code> is the default distribution for all sites. Currently only <code>IIDSitePrior</code> is supported.</li><li>Different priors for specified sites can be set using kwargs.</li><li>The <code>refant</code>  set the reference antennae to be used and is typically only done for priors that</li></ul><p>correspond to gain phases.</p><ul><li>The <code>phase</code> argument is a boolean that specifies if</li></ul><p>the prior is for a <code>phase</code> or not. <em>The phase argument is experimental and we recommend setting it to false currently.</em></p><p><strong>Example</strong></p><pre><code class="language-julia hljs">p = ArrayPrior(IIDSitePrior(ScanSeg(), Normal(0, 0.1)); LM = IIDSitePrior(ScanSeg(), Normal(0.0, 1.0)) refant=SEFDReference())</code></pre><p>means that every site has a normal prior with mean 0 and 0.1 std. dev. except LM which is mean zero and unit std. dev. Finally the refant is using the <a href="#Comrade.SEFDReference"><code>SEFDReference</code></a> scheme.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/array_priors.jl#L9-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.Segmentation" href="#Comrade.Segmentation"><code>Comrade.Segmentation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type Segmentation</code></pre><p>The data segmentation scheme to use. This is used specify how often we want various instrument hyperparameters to change. A user subtyping this expression must implement the following functions:</p><ul><li><a href="#Comrade.timestamps"><code>timestamps</code></a>: Specifies the time region for each segmentation scheme given an array</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/segmentation.jl#L3-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.IntegSeg" href="#Comrade.IntegSeg"><code>Comrade.IntegSeg</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct IntegSeg &lt;: Comrade.Segmentation</code></pre><p>Data segmentation such that the quantity is constant over the time stamps in the data. If the data is scan-averaged before then <code>IntegSeg</code> will be identical to <code>ScanSeg</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/segmentation.jl#L32-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.ScanSeg" href="#Comrade.ScanSeg"><code>Comrade.ScanSeg</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ScanSeg &lt;: Comrade.Segmentation</code></pre><p>Data segmentation such that the quantity is constant over a <code>scan</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/segmentation.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.TrackSeg" href="#Comrade.TrackSeg"><code>Comrade.TrackSeg</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct TrackSeg &lt;: Comrade.Segmentation</code></pre><p>Data segmentation such that the quantity is constant over a <code>track</code>, i.e., the observation &quot;night&quot;.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/segmentation.jl#L15-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.timestamps" href="#Comrade.timestamps"><code>Comrade.timestamps</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">timestamps(seg::Segmentation, array::AbstractArrayConfiguration)</code></pre><p>Return the time stamps or really a vector of integration time regions for a given segmentation scheme <code>seg</code> and array configuration <code>array</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/segmentation.jl#L40-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.SingleReference" href="#Comrade.SingleReference"><code>Comrade.SingleReference</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SingleReference(site::Symbol, val)</code></pre><p>Selects a single reference site for all scans. The value of the site is set to <code>val</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/refant.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.SEFDReference" href="#Comrade.SEFDReference"><code>Comrade.SEFDReference</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SEFDReference(val::Number, sefd_index = 1)</code></pre><p>Selects the reference site based on the SEFD of each telescope, where the smallest SEFD is preferentially selected. The reference gain is set to <code>val</code> and the user can select to use the <code>n</code> lowest SEFD site by passing <code>sefd_index = n</code>.</p><p><strong>Notes</strong></p><p>This is done on a per-scan basis so if a site is missing from a scan the next highest SEFD site will be used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/priors/refant.jl#L24-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.SingleStokesGain" href="#Comrade.SingleStokesGain"><code>Comrade.SingleStokesGain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SingleStokesGain(param_map)</code></pre><p>Construct a gain term that is applicable to a single measured visibility. This is useful for pure stokes I modeling. The <code>param_map</code> is a function that maps the set of parameters to the gain term.</p><p>The arguments of <code>param_map</code> is typically a named tuple, where some of the elements are the parameter values needed to compute the gain. The return value of the <code>param_map</code> should be a single number or complex gain.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">G = SingleStokesGain(x-&gt;exp(x.lg + xp.gp))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/jonesmatrices.jl#L9-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.JonesG" href="#Comrade.JonesG"><code>Comrade.JonesG</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">JonesG(param_map)</code></pre><p>Describes a gain Jones matrix with layout</p><p>g1 0   0  g2</p><p>where <code>g1</code> and <code>g2</code> are the gains for first and second feed of the telescope.</p><p>The <code>param_map</code> is a function that maps the set of parameters to the gain term. The arguments of <code>param_map</code> is typically a named tuple, where some of the elements are the parameter values needed to compute the gain. The return value of the <code>param_map</code> should be a two element tuple where the first element is the complex gain <code>g1</code> and the second element is the complex gain <code>g2</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">G = JonesG() do
    g1 = exp(x.lg1 + 1im.*x.gp1)
    g2 = g1*exp(x.lgratio + 1im.*x.gpratio)
    return g1, g2
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/jonesmatrices.jl#L31-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.JonesD" href="#Comrade.JonesD"><code>Comrade.JonesD</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">JonesD(param_map)</code></pre><p>Describes a leakage Jones matrix with layout</p><p>1 d1   d2 1</p><p>where <code>d1</code> and <code>d2</code> are the d-terms for first and second feed of the telescope.</p><p>The <code>param_map</code> is a function that maps the set of parameters to the gain term. The arguments of <code>param_map</code> is typically a named tuple, where some of the elements are the parameter values needed to compute the gain. The return value of the <code>param_map</code> should be a two element tuple where the first element is the complex d-term <code>d1</code> and the second element is the complex d-term <code>d2</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">D = JonesD() do
    d1 = complex(x.d1real, x.d1imag)
    d2 = complex(x.d2real, x.d2imag)
    return d1, d2
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/jonesmatrices.jl#L62-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.JonesR" href="#Comrade.JonesR"><code>Comrade.JonesR</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">JonesR(;add_fr=true)</code></pre><p>The <strong>response</strong> Jones matrix. This is the reponse the telescope has to the incoming electric field, if the telescope was ideal. If <code>add_fr=true</code> then feed rotation are included.</p><p>This Jones matrix has no parameters so it doesn&#39;t accept a <code>param_map</code>. The <code>add_fr</code> argument is a boolean that specifies if feed rotation should be included.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/jonesmatrices.jl#L138-L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.JonesF" href="#Comrade.JonesF"><code>Comrade.JonesF</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">JonesF(;add_fr=true)</code></pre><p>The <strong>feed rotation</strong> Jones matrix. This matrix describes the orientation of the feeds of the telescope.</p><p>This Jones matrix has no parameters so it doesn&#39;t accept a <code>param_map</code>. The <code>add_fr</code> argument is a boolean that specifies if feed rotation should be included.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/jonesmatrices.jl#L117-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.GenericJones" href="#Comrade.GenericJones"><code>Comrade.GenericJones</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">GenericJones(param_map)</code></pre><p>Construct a generic dense jones matrix with four parameterized elements.</p><p>The <code>param_map</code> is a function that maps the set of parameters to the gain term. The arguments of <code>param_map</code> is typically a named tuple, where some of the elements are the parameter values needed to compute the gain. The return value of the <code>param_map</code> should be a four element tuple where the elements are the entries of the jones matrix in column major order.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">J = GenericJones() do
    return x.j11, x.j21, x.j12, x.j22
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/jonesmatrices.jl#L93-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.JonesSandwich" href="#Comrade.JonesSandwich"><code>Comrade.JonesSandwich</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">JonesSandwich([decomp_function=splat(*),] matrices::AbstractJonesMatrix...)</code></pre><p>Constructs a Jones matrix that is the results combining multiple Jones matrices together. The specific composition is determined by the <code>decomp_function</code>. For example if the decomp function is <code>*</code> then the matrices are multiplied together, if it is <code>+</code> then they are added.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">G = JonesG(x-&gt;(x.gR, x.gL)) # Gain matrix
D = JonesD(x-&gt;(x.dR, x.dL)) # leakage matrix
F = JonesF()                # Feed rotation matrix

J = JonesSandwich(splat(*), G, D, F) # Construct the full Jones matrix as G*D*F

# Or if you want to include FR calibration
J = JonesSandwich(G, D, F) do g, d, f
    return adjoint(f)g*d*f
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/jonesmatrices.jl#L175-L197">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.AbstractInstrumentModel" href="#Comrade.AbstractInstrumentModel"><code>Comrade.AbstractInstrumentModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractInstrumentModel</code></pre><p>The abstract instrument model. For a concrete implementation see <a href="#Comrade.IdealInstrumentModel"><code>IdealInstrumentModel</code></a> and <a href="#Comrade.InstrumentModel"><code>InstrumentModel</code></a>.</p><p>Any subtype must implement the following methods</p><ul><li><code>set_array(m::AbstractInstrumentModel, array::AbstractArrayConfiguration)</code>: Sets the array configuration  for the instrument model <code>m</code> and returns the observed instrument model and prior.</li><li><code>apply_instrument(vis, m::AbstractInstrumentModel, x)</code>: Applies the instrument model <code>m</code> to the visibilities  <code>vis</code> given the model parameters <code>x</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/model.jl#L3-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.IdealInstrumentModel" href="#Comrade.IdealInstrumentModel"><code>Comrade.IdealInstrumentModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IdealInstrument(array::AbstractArrayConfiguration)</code></pre><p>Constructs an ideal instrument that has no corruptions or feed rotation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/model.jl#L18-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.InstrumentModel" href="#Comrade.InstrumentModel"><code>Comrade.InstrumentModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">InstrumentModel(jones, prior; refbasis = CirBasis())</code></pre><p>Builds an instrument model using the jones matrix <code>jones</code>, with priors <code>prior</code>. The reference basis is <code>refbasis</code> and is used to define what the ideal basis is. Namely, the basis that you have the ideal visibilties to be represented in. For classical VLBI <code>refbasis = CirBasis</code> is a good default option, sinc the majority of the array uses circular feeds. For linear feed arrays like VGOS a user should switch to <code>LinBasis</code>, although failure to do so will not cause any errors, and is just a less efficient representation of the visibilities.</p><p><strong>Arguments</strong></p><ul><li><code>jones</code> : The jones matrix that represents the instrument. This is a function that takes in the  parameters of the instrument and returns a jones matrix. See <a href="#Comrade.SingleStokesGain"><code>SingleStokesGain</code></a>  for a Stokes I example and <a href="#Comrade.JonesG"><code>JonesG</code></a> or <a href="#Comrade.JonesD"><code>JonesD</code></a> for polarized examples.</li><li><code>prior</code>: A named tuple of <a href="#Comrade.ArrayPrior"><code>ArrayPrior</code></a> that specify what the priors are for each  component used to construct the jones matrix using the function <code>jones</code></li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>refbasis</code>: The reference basis used for the computation. The default is <code>CirBasis()</code> which are circular feeds.</li></ul><p><strong>Example</strong></p><p>A Stokes I example is</p><pre><code class="language-julia-repl hljs">julia&gt; G = SingleStokesGain(x-&gt;exp(x.lg + 1im*x.pg))
julia&gt; intprior = (lg = ArrayPrior(IIDSitePrior(ScanSeg(), Normal(0.0, 0.1))),
            pg = ArrayPrior(IIDSitePrior(ScanSeg(), DiagVonMises(0.0, inv(π^2))))
            )

julia&gt; intm = InstrumentModel(G, intprior)</code></pre><p>A standard polarized example is</p><pre><code class="language-julia-repl hljs">julia&gt; G = JonesG() do
        gR = exp.(x.lgr + 1im*x.gpr)
        gL = gr*exp.(x.lgrat + 1im*x.gprat)
        return gR, gL
    end
julia&gt; D = JonesD() do
        dR = complex.(x.dRre, x.dRim)
        dL = complex.(x.dLre, x.dLim)
        return gR, gL
    end
julia&gt; R = JonesR()
julia&gt; J = JonesSandwich(G, D, R)
julia&gt; intprior = (lgr = ArrayPrior(IIDSitePrior(ScanSeg(), Normal(0.0, 0.1)),
                    gpr = ArrayPrior(IIDSitePrior(ScanSeg(), DiagonalVonMises(0.0, inv(π^2))),
                    lgrat = ArrayPrior(IIDSitePrior(ScanSeg(), Normal(0.0, 0.1)),
                    gprat = ArrayPrior(IIDSitePrior(ScanSeg(), DiagonalVonMises(0.0, inv(π^2))),
                    dRre = ArrayPrior(IIDSitePrior(TrackSeg(), Normal(0.0, 0.1)),
                    dRim = ArrayPrior(IIDSitePrior(TrackSeg(), Normal(0.0, 0.1)),
                    dLre = ArrayPrior(IIDSitePrior(TrackSeg(), Normal(0.0, 0.1)),
                    dLim = ArrayPrior(IIDSitePrior(TrackSeg(), Normal(0.0, 0.1))
                    )
julia&gt; intm = InstrumentModel(J, intprior)</code></pre><p>which construct the gain matrix from R and ratios, and D is the small leakage matrix. <a href="#Comrade.JonesR"><code>JonesR</code></a> is the <em>response matrix</em> that controls how the site responds to the ideal visibility in the reference basis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/model.jl#L74-L139">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.SiteArray" href="#Comrade.SiteArray"><code>Comrade.SiteArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SiteArray(data, times, frequencies, sites)</code></pre><p>A <code>SiteArray</code> is an array of data that has a specified ordering of <code>times</code>, <code>frequencies</code>, and <code>sites</code>. Each data point is assigned a unique <code>time</code>, <code>frequency</code>, and <code>site</code> code. This allows for easy selection of data points based on these criteria and forms the base array for instrument modeling.</p><p>To select a subset of the data based on a specifid site, time and frequency you can use</p><pre><code class="nohighlight hljs">sarr[S=:ALMA, Ti=1:10, Fr=1:10]</code></pre><p>which will grab the first 10 time and frequency points for the ALMA site.</p><p>Otherwise indexing into the array will return an element whose time, frequency, and site are the element of the <code>times</code>, <code>frequencies</code>, and <code>sites</code> arrays respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/site_array.jl#L3-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.SiteLookup" href="#Comrade.SiteLookup"><code>Comrade.SiteLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SiteLookup(s::SiteArray)</code></pre><p>Construct a site lookup dictionary for a site array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/site_array.jl#L183-L187">source</a></section></article><h3 id="Posterior-Constructions"><a class="docs-heading-anchor" href="#Posterior-Constructions">Posterior Constructions</a><a id="Posterior-Constructions-1"></a><a class="docs-heading-anchor-permalink" href="#Posterior-Constructions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.AbstractVLBIPosterior" href="#Comrade.AbstractVLBIPosterior"><code>Comrade.AbstractVLBIPosterior</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractVLBIPosterior</code></pre><p>An abstract VLBI posterior. See <a href="#Comrade.VLBIPosterior"><code>VLBIPosterior</code></a> for a concrete implementation. This implements the  <code>DensityInterface</code> and <code>LogDensityProblem</code> interfaces.</p><p>Default methods include:</p><ul><li><code>logprior(d::AbstractVLBIPosterior, θ)</code>: Computes the log-prior of the posterior.</li><li><code>loglikelihood(d::AbstractVLBIPosterior, θ)</code>: Computes the log-likelihood of the posterior.</li><li><code>dimension(d::AbstractVLBIPosterior)</code>: Returns the dimension of the posterior.</li><li><code>skymodel(d::AbstractVLBIPosterior, θ)</code>: Returns the sky model of the posterior.</li><li><code>prior_sample(rng::AbstractRandom, d::AbstractVLBIPosterior, dims...)</code>: Samples from the prior of the posterior.</li><li><code>forward_model(d::AbstractVLBIPosterior, θ)</code>: Computes the forward model visibilities of the posterior.</li><li><code>dataproducts(d::AbstractVLBIPosterior)</code>: Returns the data products you are fitting as a tuple.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L9-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.logprior" href="#Comrade.logprior"><code>Comrade.logprior</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">logprior(d::AbstractVLBIPosterior, θ)</code></pre><p>Computes the log-prior of the posterior <code>d</code> with parameters <code>θ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L29-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.loglikelihood" href="#Comrade.loglikelihood"><code>Comrade.loglikelihood</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">loglikelihood(d::AbstractVLBIPosterior, θ)</code></pre><p>Computes the log-likelihood of the posterior <code>d</code> with parameters <code>θ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L122-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.dataproducts" href="#Comrade.dataproducts"><code>Comrade.dataproducts</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dataproducts(d::AbstractVLBIPosterior)</code></pre><p>Returns the data products you are fitting as a tuple. The order of the tuple corresponds to the order of the <code>dataproducts</code> argument in <a href="#Comrade.VLBIPosterior"><code>VLBIPosterior</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L143-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.skymodel" href="#Comrade.skymodel"><code>Comrade.skymodel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">skymodel(d::AbstractVLBIPosterior)</code></pre><p>Returns the sky model of the posterior <code>d</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L39-L43">source</a></section><section><div><pre><code class="language-julia hljs">skymodel(post::AbstractVLBIPosterior, θ)</code></pre><p>Returns the sky model or image of a posterior using the parameter values<code>θ</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L133-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.instrumentmodel-Tuple{Comrade.AbstractVLBIPosterior}" href="#Comrade.instrumentmodel-Tuple{Comrade.AbstractVLBIPosterior}"><code>Comrade.instrumentmodel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">instrumentmodel(d::AbstractVLBIPosterior)</code></pre><p>Returns the instrument model of the posterior <code>d</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L46-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.forward_model" href="#Comrade.forward_model"><code>Comrade.forward_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">forward_model(d::AbstractVLBIPosterior, θ)</code></pre><p>Computes the forward model visibilities of the posterior <code>d</code> with parameters <code>θ</code>. Note these are the complex visiblities or the coherency matrices, not the actual data products observed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L110-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.prior_sample" href="#Comrade.prior_sample"><code>Comrade.prior_sample</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">prior_sample([rng::AbstractRandom], post::AbstractVLBIPosterior, [dims=1])</code></pre><p>Returns sample from the prior distribution of the posterior. If dims is specified then multiple independent draws are returned with shape dims.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/abstract.jl#L93-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.likelihood" href="#Comrade.likelihood"><code>Comrade.likelihood</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">likelihood(d::ConditionedLikelihood, μ)</code></pre><p>Returns the likelihood of the model, with parameters μ. That is, we return the distribution of the data given the model parameters μ. Samples from this distribution are simulated data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/likelihood.jl#L8-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.VLBIPosterior" href="#Comrade.VLBIPosterior"><code>Comrade.VLBIPosterior</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VLBIPosterior(skymodel::SkyModel, instumentmodel::InstrumentModel, dataproducts::EHTObservationTable...)</code></pre><p>Creates a VLBILikelihood using the <code>skymodel</code> its related metadata <code>skymeta</code> and the <code>instrumentmodel</code> and its metadata <code>instumentmeta</code>. . The <code>model</code> is a function that converts from parameters <code>θ</code> to a Comrade AbstractModel which can be used to compute <a href="../base_api/#ComradeBase.visibilitymap"><code>visibilitymap</code></a> and a set of <code>metadata</code> that is used by <code>model</code> to compute the model.</p><p><strong>Warning</strong></p><p>The <code>model</code> itself must be a two argument function where the first argument is the set of model parameters and the second is a container that holds all the additional information needed to construct the model. An example of this is when the model needs some precomputed cache to define the model.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">dlcamp, dcphase = extract_table(obs, LogClosureAmplitude(), ClosurePhases())
array = arrayconfiguration(dlcamp)

function sky(θ, metadata)
    (; r, a) = θ
    m = stretched(ExtendedRing(a), r, r)
    return m
end

skyprior = (r = Uniform(μas2rad(10.0), μas2rad(30.0)), a = Uniform(1.0, 10.0))
g  = imagepixels(μas2rad(100.0), μas2rad(100.0), 256, 256)
skym = SkyModel(sky, skyprior, g)

G = SingleStokesGain(x-&gt;exp(x.lg + 1im*x.pg))
intprior = (lg = ArrayPrior(IIDSitePrior(ScanSeg(), Normal(0.0, 0.1))),
            pg = ArrayPrior(IIDSitePrior(ScanSeg(), DiagVonMises(0.0, inv(π^2))))
            )
intmodel = InstrumentModel(G, intprior, array)

post = VLBIPosterior(skym, intmodel, dlcamp, dcphase)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/vlbiposterior.jl#L14-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.simulate_observation" href="#Comrade.simulate_observation"><code>Comrade.simulate_observation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">simulate_observation([rng::Random.AbstractRNG], post::VLBIPosterior, θ; add_thermal_noise=true)</code></pre><p>Create a simulated observation using the posterior and its data <code>post</code> using the parameter values <code>θ</code>. In Bayesian terminology this is a draw from the posterior predictive distribution.</p><p>If <code>add_thermal_noise</code> is true then baseline based thermal noise is added. Otherwise, we just return the model visibilities.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/vlbiposterior.jl#L112-L120">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.residuals" href="#Comrade.residuals"><code>Comrade.residuals</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">residuals(post::VLBIPosterior, θ)</code></pre><p>Compute the residuals for each data product in <code>post</code> using the parameter values <code>θ</code>. The resturn objects are <code>EHTObservationTables</code>, where the measurements are the residuals.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/vlbiposterior.jl#L139-L144">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.TransformedVLBIPosterior" href="#Comrade.TransformedVLBIPosterior"><code>Comrade.TransformedVLBIPosterior</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct TransformedVLBIPosterior{P&lt;:VLBIPosterior, T} &lt;: Comrade.AbstractVLBIPosterior</code></pre><p>A transformed version of a <code>VLBIPosterior</code> object. This is an internal type that an end user shouldn&#39;t have to directly construct. To construct a transformed posterior see the <a href="#HypercubeTransform.asflat-Tuple{VLBIPosterior}"><code>asflat</code></a>, <a href="#HypercubeTransform.ascube-Tuple{VLBIPosterior}"><code>ascube</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/transformed.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TransformVariables.transform-Tuple{Comrade.TransformedVLBIPosterior, Any}" href="#TransformVariables.transform-Tuple{Comrade.TransformedVLBIPosterior, Any}"><code>TransformVariables.transform</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">transform(posterior::TransformedVLBIPosterior, x)</code></pre><p>Transforms the value <code>x</code> from the transformed space (e.g. unit hypercube if using <a href="#HypercubeTransform.ascube-Tuple{VLBIPosterior}"><code>ascube</code></a>) to parameter space which is usually encoded as a <code>NamedTuple</code>.</p><p>For the inverse transform see <a href="#TransformVariables.inverse-Tuple{Comrade.TransformedVLBIPosterior, Any}"><code>inverse</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/transformed.jl#L28-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TransformVariables.inverse-Tuple{Comrade.TransformedVLBIPosterior, Any}" href="#TransformVariables.inverse-Tuple{Comrade.TransformedVLBIPosterior, Any}"><code>TransformVariables.inverse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">inverse(posterior::TransformedVLBIPosterior, x)</code></pre><p>Transforms the value <code>y</code> from parameter space to the transformed space (e.g. unit hypercube if using <a href="#HypercubeTransform.ascube-Tuple{VLBIPosterior}"><code>ascube</code></a>).</p><p>For the inverse transform see <a href="#TransformVariables.transform-Tuple{Comrade.TransformedVLBIPosterior, Any}"><code>transform</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/transformed.jl#L39-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="HypercubeTransform.ascube-Tuple{VLBIPosterior}" href="#HypercubeTransform.ascube-Tuple{VLBIPosterior}"><code>HypercubeTransform.ascube</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ascube(post::VLBIPosterior)</code></pre><p>Construct a flattened version of the posterior where the parameters are transformed to live in (0, 1), i.e. the unit hypercube.</p><p>This returns a <code>TransformedVLBIPosterior</code> that obeys the <code>DensityInterface</code> and can be evaluated in the usual manner, i.e. <code>logdensityof</code>. Note that the transformed posterior automatically includes the terms log-jacobian terms of the transformation.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; tpost = ascube(post)
julia&gt; x0 = prior_sample(tpost)
julia&gt; logdensityof(tpost, x0)</code></pre><p><strong>Notes</strong></p><p>This is the transform that should be used if using typical NestedSampling methods, i.e. <code>ComradeNested</code>. For the transformation to unconstrained space see <a href="#HypercubeTransform.asflat-Tuple{VLBIPosterior}"><code>asflat</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/transformed.jl#L139-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="HypercubeTransform.asflat-Tuple{VLBIPosterior}" href="#HypercubeTransform.asflat-Tuple{VLBIPosterior}"><code>HypercubeTransform.asflat</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">asflat(post::VLBIPosterior)</code></pre><p>Construct a flattened version of the posterior where the parameters are transformed to live in (-∞, ∞).</p><p>This returns a <code>TransformedVLBIPosterior</code> that obeys the <code>DensityInterface</code> and can be evaluated in the usual manner, i.e. <code>logdensityof</code>. Note that the transformed posterior automatically includes the terms log-jacobian terms of the transformation.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; tpost = ascube(post)
julia&gt; x0 = prior_sample(tpost)
julia&gt; logdensityof(tpost, x0)</code></pre><p><strong>Notes</strong></p><p>This is the transform that should be used if using typical MCMC methods, i.e. NUTS. For the transformation to the unit hypercube see <a href="#HypercubeTransform.ascube-Tuple{VLBIPosterior}"><code>ascube</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/posterior/transformed.jl#L49-L70">source</a></section></article><h3 id="Inference"><a class="docs-heading-anchor" href="#Inference">Inference</a><a id="Inference-1"></a><a class="docs-heading-anchor-permalink" href="#Inference" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.comrade_opt" href="#Comrade.comrade_opt"><code>Comrade.comrade_opt</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">comrade_opt(post::VLBIPosterior, opt, adtype=Optimization.NoAD(), args...; initial_params=nothing, kwargs...)</code></pre><p>Optimize the posterior <code>post</code> using the <code>opt</code> optimizer. The <code>adtype</code> specifies the automatic differentiation. The <code>args/kwargs</code> are forwarded to `the specific optimization package.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This function won&#39;t have any methods until the optimization package is loaded. We recommend loading the <code>Optimization.jl</code> package.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/optimization.jl#L3-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.MemoryStore" href="#Comrade.MemoryStore"><code>Comrade.MemoryStore</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MemoryStore</code></pre><p>Stored the HMC samplers in memory or ram.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/inference.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.DiskStore" href="#Comrade.DiskStore"><code>Comrade.DiskStore</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DiskStore(;name::String = &quot;Results&quot;, stride::Int = 100)</code></pre><p>Type that specifies to save the samples results to disk.</p><p><strong>Fields</strong></p><ul><li><code>name</code>: Path of the directory where the results will be saved. If the path does not exist it will be automatically created.</li></ul><ul><li><code>stride</code>: The output stride, i.e. every <code>stride</code> steps the MCMC output will be dumped to disk.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/inference.jl#L18-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.load_samples" href="#Comrade.load_samples"><code>Comrade.load_samples</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_samples(out::DiskOutput, indices::Union{Base.Colon, UnitRange, StepRange}=Base.Colon(); table=:samples)
load_samples(out::String, indices::Union{Base.Colon, UnitRange, StepRange}=Base.Colon(); table=:samples)</code></pre><p>The the results from a HMC run saved to disk. To read in the output the user can either pass the resulting <code>out</code> object, or the path to the directory that the results were saved, i.e. the path specified in <a href="#Comrade.DiskStore"><code>DiskStore</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>out::Union{String, DiskOutput}</code>: If <code>out</code> is a string is must point to the direct that the <code>DiskStore</code>  pointed to. Otherwise it is what is directly returned from sample.</li><li><code>indices</code>: The indices of the that you want to load into memory. The default is to load the entire table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>table</code>: A string specifying the table you wish to read in. There are two options: :samples which  corresponds to the actual MCMC chain, and <code>stats</code> which corresponds to additional information  about the sampler, e.g., the log density of each sample and tree statistics.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/inference.jl#L46-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.PosteriorSamples" href="#Comrade.PosteriorSamples"><code>Comrade.PosteriorSamples</code></a> — <span class="docstring-category">Type</span></header><section><div><p>PosteriorSamples(chain, stats; metadata=Dict(:sampler=&gt;:unknown))</p><p>This is the default sampler output from Comrade MCMC extensions. The object contains the posterior samples, the sampler statistics, and metadata about the sampler used.</p><p>Indexing this array behaves like indexing the samples organized as a StructArray. By default all NamedTuples and Tuples are unwrapped.</p><p>To access the samples use <a href="#Comrade.postsamples"><code>postsamples</code></a> and to access the sampler statistics use <a href="#Comrade.samplerstats"><code>samplerstats</code></a>, or the acesss sampler specific information use <a href="#Comrade.samplerinfo"><code>samplerinfo</code></a>.</p><p>To recursively map a function over the samples the unexported <a href="#Comrade.rmap"><code>Comrade.rmap</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/posteriorsamples.jl#L46-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.postsamples" href="#Comrade.postsamples"><code>Comrade.postsamples</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">postsamples(s::PosteriorSamples)</code></pre><p>Return the samples from the PosteriorSamples object <code>s</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/posteriorsamples.jl#L149-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.samplerstats" href="#Comrade.samplerstats"><code>Comrade.samplerstats</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">samplerstats(s::PosteriorSamples)</code></pre><p>Return the sampler statistics from the PosteriorSamples object <code>s</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/posteriorsamples.jl#L158-L162">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.samplerinfo" href="#Comrade.samplerinfo"><code>Comrade.samplerinfo</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">samplerinfo(s::PosteriorSamples)</code></pre><p>Return the metadata from the PosteriorSamples object <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/posteriorsamples.jl#L168-L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.resample_equal" href="#Comrade.resample_equal"><code>Comrade.resample_equal</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">resample_equal(post::PosteriorSamples, nsamples::Int)</code></pre><p>Resample the posterior samples so you have <code>nsamples</code> of equal weight. In order for this method to be applicable a <code>:weights</code> field must be present in the sampler statistics and the weight must correspond to the probability weights of the samples.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/posteriorsamples.jl#L178-L184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.residual" href="#Comrade.residual"><code>Comrade.residual</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">residual(post::AbstractVLBIPosterior, p)</code></pre><p>Plots the normalized residuals for the posterior <code>post</code> given the parameters <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/visualizations/data.jl#L256-L260">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.residual_data" href="#Comrade.residual_data"><code>Comrade.residual_data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">residual_data(vis, data::EHTObservationTable)</code></pre><p>Compute the residuals for the model visibilities <code>vis</code> and the data <code>data</code>. The residuals are not normalized and the returned object is an <code>EHTObservationTable</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/visualizations/data.jl#L372-L377">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.chi2" href="#Comrade.chi2"><code>Comrade.chi2</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">chi2(post::AbstractVLBIPosterior, p)</code></pre><p>Returns a tuple of the chi-squared values for each data product in the posterior <code>post</code> given the parameters <code>p</code>. Note that the chi-square is not reduced.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/visualizations/data.jl#L353-L358">source</a></section></article><h2 id="Misc"><a class="docs-heading-anchor" href="#Misc">Misc</a><a id="Misc-1"></a><a class="docs-heading-anchor-permalink" href="#Misc" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.site_tuple" href="#Comrade.site_tuple"><code>Comrade.site_tuple</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">site_tuple(sites, default; reference=nothing kwargs...)
site_tuple(obs::AbstractObservationTable, default; reference=nothing, kwargs...)
site_tuple(obs::AbstractArrayConfiguration, default; reference=nothing, kwargs...)</code></pre><p>Convienence function that will construct a <code>NamedTuple</code> of objects whose names are the <code>sites</code> in the observation <code>obs</code> or explicitly in the argument <code>sites</code>. The <code>NamedTuple</code> will be filled with <code>default</code> if no kwargs are defined otherwise each kwarg (key, value) pair denotes a sites and value pair.</p><p>Optionally the user can specify a <code>reference</code> sites that will be dropped from the tuple. This is useful for selecting a reference sites for gain phases</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; sites = (:AA, :AP, :LM, :PV)
julia&gt; site_tuple(sites, ScanSeg())
(AA = ScanSeg(), AP = ScanSeg(), LM = ScanSeg(), PV = ScanSeg())
julia&gt; site_tuple(sites, ScanSeg(); AA = FixedSeg(1.0))
(AA = FixedSeg(1.0), AP = ScanSeg(), LM = ScanSeg(), PV = ScanSeg())
julia&gt; site_tuple(sites, ScanSeg(); AA = FixedSeg(1.0), PV = TrackSeg())
(AA = FixedSeg(1.0), AP = ScanSeg(), LM = ScanSeg(), PV = TrackSeg())
julia&gt; site_tuple(sites, Normal(0.0, 0.1); reference=:AA, LM = Normal(0.0, 1.0))
(AP = Normal(0.0, 0.1), LM = Normal(0.0, 1.0), PV = Normal(0.0, 0.1))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/instrument/utility.jl#L3-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.dirty_image" href="#Comrade.dirty_image"><code>Comrade.dirty_image</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dirty_image(fov::Real, npix::Int, obs::EHTObservation{&lt;:EHTVisibilityDatum}) where T</code></pre><p>Computes the dirty image of the complex visibilities assuming a field of view of <code>fov</code> and number of pixels <code>npix</code> using the complex visibilities found in the observation <code>obs</code>.</p><p>The <code>dirty image</code> is the inverse Fourier transform of the measured visibilties assuming every other visibility is zero.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/dirty_image.jl#L27-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.dirty_beam" href="#Comrade.dirty_beam"><code>Comrade.dirty_beam</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dirty_beam(fov::Real, npix::Int, obs::EHTObservation{&lt;:EHTVisibilityDatum})</code></pre><p>Computes the dirty beam of the complex visibilities assuming a field of view of <code>fov</code> and number of pixels <code>npix</code> using baseline coverage found in <code>obs</code>.</p><p>The <code>dirty beam</code> is the inverse Fourier transform of the (u,v) coverage assuming every visibility is unity and everywhere else is zero.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/dirty_image.jl#L51-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.beamsize" href="#Comrade.beamsize"><code>Comrade.beamsize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">beamsize(ac::AbstractArrayConfiguration)</code></pre><p>Calculate the approximate beam size of the array <code>ac</code> as the inverse of the longest baseline distance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/array.jl#L44-L49">source</a></section><section><div><pre><code class="language-julia hljs">beamsize(obs::AbstractObservationTable)</code></pre><p>Calculate the approximate beam size of the observation <code>obs</code> as the inverse of the longest baseline distance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L73-L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.apply_fluctuations" href="#Comrade.apply_fluctuations"><code>Comrade.apply_fluctuations</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">apply_fluctuations(f, mimg::IntensityMap, δ::AbstractArray)</code></pre><p>Apply multiplicative fluctuations to an image <code>mimg</code> with fluctuations <code>δ</code>. The function <code>f</code> is applied to the fluctuations and then the the transfored δ are multiplicatively applied to the image.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/mrf_image.jl#L4-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.rmap" href="#Comrade.rmap"><code>Comrade.rmap</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rmap(f, x::PosteriorSamples)</code></pre><p>Recursively map a function <code>f</code> over the elements of <code>x</code>. For instance to compute the mean of all fields you can do <code>Comrade.rmap(mean, chain)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/inference/posteriorsamples.jl#L103-L108">source</a></section></article><h2 id="Internal-(Not-Public-API)"><a class="docs-heading-anchor" href="#Internal-(Not-Public-API)">Internal (Not Public API)</a><a id="Internal-(Not-Public-API)-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-(Not-Public-API)" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.build_datum" href="#Comrade.build_datum"><code>Comrade.build_datum</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">build_datum(data::AbstractObservationTable, i::Int)</code></pre><p>Build the datum <code>F</code> for a given observation table <code>data</code>. This is an internal method that users shouldn&#39;t have to deal with directly unless they are implementing a new <code>AbstractObservationTable</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/obstable.jl#L51-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.ObservedSkyModel" href="#Comrade.ObservedSkyModel"><code>Comrade.ObservedSkyModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ObservedSkyModel(sky::AbstractSkyModel, array::AbstractArrayConfiguration)</code></pre><p>Constructs a sky model that has been theoretically observed by an array with configuration <code>array</code>. Note that this is not a public facing method and is used internally to construct the observed sky model for use in <a href="#Comrade.VLBIPosterior"><code>VLBIPosterior</code></a>. Users should construct a <a href="#Comrade.SkyModel"><code>SkyModel</code></a> and pass that to a <a href="#Comrade.VLBIPosterior"><code>VLBIPosterior</code></a> object instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/skymodels/models.jl#L85-L93">source</a></section></article><h3 id="eht-imaging-interface-(Internal)"><a class="docs-heading-anchor" href="#eht-imaging-interface-(Internal)">eht-imaging interface (Internal)</a><a id="eht-imaging-interface-(Internal)-1"></a><a class="docs-heading-anchor-permalink" href="#eht-imaging-interface-(Internal)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.extract_amp" href="#Comrade.extract_amp"><code>Comrade.extract_amp</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">extract_amp(obs; kwargs...)</code></pre><p>Extracts the visibility amplitudes from an <code>obs</code>. This is an internal method for dispatch. Only use this if interfacing Comrade with a new data type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L161-L167">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.extract_cphase" href="#Comrade.extract_cphase"><code>Comrade.extract_cphase</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">extract_cphase(obs; kwargs...)</code></pre><p>Extracts the closure phases from an <code>obs</code>. This is an internal method for dispatch. Only use this if interfacing Comrade with a new data type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L145-L151">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.extract_lcamp" href="#Comrade.extract_lcamp"><code>Comrade.extract_lcamp</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">extract_lcamp(obs; kwargs...)</code></pre><p>Extracts the log-closure amplitudes from an <code>obs</code>. This is an internal method for dispatch. Only use this if interfacing Comrade with a new data type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L153-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.extract_vis" href="#Comrade.extract_vis"><code>Comrade.extract_vis</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">extract_vis(obs; kwargs...)</code></pre><p>Extracts the stokes I complex visibilities from an obs. This is an internal method for dispatch. Only use this if interfacing Comrade with a new data type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L169-L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Comrade.extract_coherency" href="#Comrade.extract_coherency"><code>Comrade.extract_coherency</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">extract_coherency(obs; kwargs...)</code></pre><p>Extracts the full coherency matrix from an observation. This is an internal method for dispatch. Only use this if interfacing Comrade with a new data type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ptiede/Comrade.jl/blob/ad0668029675baa797053f608e088656feca27c3/src/observations/dataproducts.jl#L177-L183">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../base_api/">« Base API</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Thursday 16 May 2024 01:50">Thursday 16 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
